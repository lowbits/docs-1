---
title: "Code-first Workflow"
sidebarTitle: "Code-first Workflow"
description: "Learn how to build a workflow using the Novu Framework"
---
import LocalStudio from "/snippets/quickstart/start-studio.mdx";
import DeployApp from "/snippets/quickstart/deploy.mdx";
import TestStep from "/snippets/quickstart/test.mdx";
import NextStepsStep from "/snippets/quickstart/next-steps.mdx";

The **Framework SDK** is specifically a TypeScript library that allows you to build code-first notification workflows, synchronize them with the Novu platform, and execute them in your own runtime environment.

## Framework Building Blocks

Every Novu workflow is built using these four key elements:

- **Workflow Identifier**: A unique ID used to link triggers to the correct workflow
- **Trigger**: The event or action that starts the workflow
- **Channel Steps**: These send notifications through your configured channels
- **Action Steps**: Functions that manage the workflowâ€™s logic and control its flow

You can learn more about each of these building blocks in the [Workflow Editor](/workflow/workflow-editor) section.


## How to build a workflow

In this guide, we will add a Novu [Bridge Endpoint](/concepts/endpoint) to a Next.js application and send our first test workflow.

<Steps>
    <LocalStudio />
    <Step title="Create a Next.js application">

        ```bash
        npx create-next-app@latest
        ```
    </Step>
    <Step title="Create an `.env` file">
        Navigate to the directory of the application and create an `.env` file containing the `NOVU_SECRET_KEY` environment variable required for securing your endpoint.
    </Step>
    <Step title="Install required packages">

        ```bash
        npm install @novu/framework zod zod-to-json-schema
        ```

                This will install

        - **`@novu/framework`** SDK Package
        - **Zod** (Recommended) - For end-to-end type safe types for your Payload and Step Controls
    </Step>
    <Step title="Add a Novu API Endpoint">

        <CodeGroup>

            ```typescript App Router (app/api/novu/route.ts)
            // app/api/novu/route.ts

            import { serve } from "@novu/framework/next";
            import { myWorkflow } from "../../novu/workflows";

            export const { GET, POST, OPTIONS } = serve({ workflows: [myWorkflow] });
            ```

            ```typescript Pages Router (pages/api/novu.ts)
            // pages/api/novu.ts

            import { serve } from '@novu/framework/next';
            import { testWorkflow } from '../../novu/workflows';

            export default serve({ workflows: [testWorkflow] });
            ```
        </CodeGroup>
    </Step>
    <Step title="Add a Novu Secret Key Environment Variable">
        Add `NOVU_SECRET_KEY` environment variable to your `.env`

        ```env
        NOVU_SECRET_KEY=<NOVU_SECRET_KEY>
        ```
    </Step>
    <Step title="Create your workflow definition">
        Add a `novu` folder that will contain your workflow definitions

        ```tsx 
        // app/novu/workflows.ts

        import { workflow } from '@novu/framework';
        import { z } from 'zod';

        export const testWorkflow = workflow('test-workflow', async ({ step, payload }) => {
            await step.email('send-email', async () => {
                return {
                    subject: 'A Successful Test Email from Novu',
                    body: 'This is a test email sent from Novu',
                };
            });
        });
        ```
    </Step>
    <Step title="Start your application">
        To start your boilerplate Next.js server with the Novu Endpoint configured, run the following command:

        ```bash
        cd my-novu-app && npm run dev
        ```

        The sample application will start on [`https://localhost:4000`](https://localhost:4000) and your novu endpoint will be exposed at `/api/novu` served by the Next.js API.

        If your Next.js application is running on other than `4000` port, restart the `novu dev` command with the port:

        ```bash
        npx novu@latest dev --port <YOUR_NEXTJS_PORT>
        ```
    </Step>
    <TestStep framework="Next.js" />

    <DeployApp />

</Steps>
